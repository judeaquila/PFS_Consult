{% extends "main/admin-base.html" %} {% block title %}Product Development Applications | Admin{% endblock %} {% block content %}
<!-- Main Content -->
<main class="main-content">
  <div class="container">
    <div class="row">
      <h2 class="fw-bold mb-4 mt-2">Product Development Applications</h2>
      <p class="lead">Manage user requests for new product concepts, and innovation.</p>
    </div>

    <div class="table-responsive">
      <table class="table mb-0 align-middle">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Application ID</th>
            <th>User</th>
            <th>Product Name</th>
            <th>Date Submitted</th>
            <th>Status</th>
            <th>Payment Status</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %} {% if not user.is_superuser %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ user.custom_id }}</td>
            <td>{{ user.first_name}}</td>
            <td>{{ user.product_name }}</td>
            <td>{{ user.submitted_at }}</td>
            <td>{{ user.application_status }}</td>
            <td>{{ user.paid_status }}</td>
            <td class="text-center">
              <div class="btn-group">
                <button
                  class="btn btn-outline-info btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#viewUserModal{{ user.id }}"
                  data-bs-toggle="tooltip"
                  title="View"
                >
                  <i class="bi bi-eye"></i>
                </button>
                <a
                  href="{% url 'edit-user' user.id %}"
                  class="btn btn-outline-warning btn-sm"
                  data-bs-toggle="tooltip"
                  title="Edit"
                >
                  <i class="bi bi-pencil-square"></i>
                </a>
                <form
                  action="{% url 'toggle-user-active' user.id %}"
                  method="POST"
                  style="display: inline"
                >
                  {% csrf_token %}
                  <button
                    type="submit"
                    class="btn btn-outline-secondary btn-sm"
                    data-bs-toggle="tooltip"
                    title="{% if user.is_active %}Deactivate{% else %}Activate{% endif %}"
                  >
                    <i
                      class="bi {% if user.is_active %}bi-person-dash{% else %}bi-person-check{% endif %}"
                    ></i>
                  </button>
                </form>
                <form
                  action="{% url 'delete-user' user.id %}"
                  method="POST"
                  style="display: inline"
                >
                  {% csrf_token %}
                  <button
                    type="submit"
                    class="btn btn-outline-danger btn-sm"
                    data-bs-toggle="tooltip"
                    title="Delete"
                    onclick="return confirm('Are you sure you want to delete this user?');"
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </form>
              </div>
            </td>
          </tr>

          <!-- View Modal -->
          <div
            class="modal fade"
            id="viewUserModal{{ user.id }}"
            tabindex="-1"
            aria-labelledby="viewUserModalLabel{{ user.id }}"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">
                    User Details: {{ user.first_name }} {{ user.last_name }}
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                  ></button>
                </div>
                <div class="modal-body">
                  <dl class="row">
                    <dt class="col-sm-4">Full Name</dt>
                    <dd class="col-sm-8">
                      {{ user.first_name }} {{ user.last_name }}
                    </dd>
                    <dt class="col-sm-4">Username</dt>
                    <dd class="col-sm-8">{{ user.username|default:"---" }}</dd>
                    <dt class="col-sm-4">Email</dt>
                    <dd class="col-sm-8">{{ user.email }}</dd>
                    <dt class="col-sm-4">Phone Number</dt>
                    <dd class="col-sm-8">{{ user.phone_number }}</dd>
                    <dt class="col-sm-4">WhatsApp</dt>
                    <dd class="col-sm-8"><a href="https://wa.me/{{ user.whatsapp_number }}" target="_blank">{{ user.whatsapp_number }}</a></dd>
                    <dt class="col-sm-4">Instagram</dt>
                    <dd class="col-sm-8"><a href="https://instagram.com/{{ user.instagram_handle }}" target="_blank">@{{ user.instagram_handle|default:"---" }}</a></dd>
                    <dt class="col-sm-4">Facebook</dt>
                    <dd class="col-sm-8"><a href="https://facebook.com/{{ user.facebook_handle }}" target="_blank">{{ user.facebook_handle|default:"---" }}</a></dd>
                    <dt class="col-sm-4">Company</dt>
                    <dd class="col-sm-8">{{ user.business_name|default:"---" }}</dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>
          {% endif %} {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</main>
</div>

<script>
  // Initialize tooltips
  document.addEventListener("DOMContentLoaded", function () {
    const tooltipTriggerList = [].slice.call(
      document.querySelectorAll('[data-bs-toggle="tooltip"]')
    );
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
  });
</script
{% endblock %}>
