{% extends "account/base.html" %}

{% block title %}All FDA Applications{% endblock title %}

{% block content %}
<main class="main-content" id="mainContent">
    <div class="container mt-5">
        <h2 class="fw-bold mb-4 mt-2">My Applications</h2>
        <p class="lead">View and track all your submitted applications.</p>

    <div class="mb-5">
        <h4 class="mb-3">FDA Applications</h4>
        {% if fda_applications %}
        <table class="table table-striped table-borderless">
            <thead>
            <tr>
                <th>Application ID</th>
                <th>Business Name</th>
                <th>Status</th>
                <th>Date Submitted</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            {% for app in fda_applications %}
            <tr>
                <td>{{ app.custom_id }}</td>
                <td>{{ app.business_name }}</td>
                <td>
                    {% if app.application_status == 'pending' %}
                        <span class="badge bg-warning text-dark">Pending</span>
                    {% elif app.application_status == 'in_review' %}
                        <span class="badge bg-primary">In Review</span>
                    {% elif app.application_status == 'completed' %}
                        <span class="badge bg-success">Completed</span>
                    {% else %}
                        <span class="badge bg-secondary">Unknown</span>
                    {% endif %}
                </td>
                <td>{{ app.submitted_at|date:"D, M d, Y h:i A" }}</td>
                <td><a href="#" class="btn btn-sm btn-outline-secondary">View</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">No FDA applications submitted yet.</p>
        {% endif %}
    </div>

    <div class="mb-5">
        <h4 class="mb-3">Facility Registrations</h4>
        {% if facility_applications %}
        <table class="table table-striped table-borderless">
            <thead>
            <tr>
                <th>Application ID</th>
                <th>Facility Name</th>
                <th>Status</th>
                <th>Date Submitted</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            {% for app in facility_applications %}
            <tr>
                <td>{{ app.custom_id }}</td>
                <td>{{ app.facility_name }}</td>
                <td><span class="text-muted">{{ app.status }}</span></td>
                <td>{{ app.submitted_at|date:"D, M d, Y h:i A" }}</td>
                <td><a href="#" class="btn btn-sm btn-outline-secondary">View</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">No Facility registrations submitted yet.</p>
        {% endif %}
    </div>

    <div class="mb-5">
        <h4 class="mb-3">Business Certificate Applications</h4>
        {% if business_cert_applications %}
        <table class="table table-striped table-borderless">
            <thead>
            <tr>
                <th>Application ID</th>
                <th>Company Name</th>
                <th>Status</th>
                <th>Date Submitted</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            {% for app in business_cert_applications %}
            <tr>
                <td>{{ app.custom_id }}</td>
                <td>{{ app.company_name }}</td>
                <td>
                    {% if app.application_status == 'pending' %}
                        <span class="badge bg-warning text-dark">Pending</span>
                    {% elif app.application_status == 'in_review' %}
                        <span class="badge bg-primary">In Review</span>
                    {% elif app.application_status == 'completed' %}
                        <span class="badge bg-success">Completed</span>
                    {% else %}
                        <span class="badge bg-secondary">Unknown</span>
                    {% endif %}
                </td>
                <td>{{ app.submitted_at|date:"D, M d, Y h:i A" }}</td>
                <td><a href="#" class="btn btn-sm btn-outline-secondary">View</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">No Business Certificate applications submitted yet.</p>
        {% endif %}
    </div>

    </div>
</main>
{% endblock %}
